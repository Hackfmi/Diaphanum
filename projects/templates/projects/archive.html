{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/typeahead.js-bootstrap.css">
{% endblock %}

{% block content %}
<div class="col-md-12">
  <form class="row" method="GET">
    <div class="row">
      <div class="control-group col-md-6">
          <label class="control-label" for="project-name">Име на проекта:</label>
          <input name="project-name" type="text" class="form-control" />
      </div>
      <div class="control-group col-md-6">
        <label class="control-label" for="project-status">Статус:</label>
        <select name="project-status" class="form-control">
        {% for status in status %}
          <option value="{{ status.0 }}">{{ status.1 }}</option>
        {% endfor %}
        </select>
      </div>
    </div>
    <div class="row">
      <div class="control-group col-md-12">
        <label class="control-label" for="mol">Материално отговорно лице:</label>
          <div>
            <input id="mol-name-container" class="autocomplete form-control" type="text" style="width: 100%;">
            <input id="mol-id-container" type="hidden" value="-1" name="mol" />
          </div>
      </div>
    </div>

    <div align="center">
      <button class="btn btn-primary btn-lg" style="margin-top: 20px; margin-bottom: 20px;">Търси</button>
    </div>
  </form>

  <div class="panel panel-default">
        <div class="panel-heading">Резултати от търсене на проекти.</div>
            <table class="table">
                <tr>
                    <th>Име</th>
                    <th>Статус</th>
                    <th>Дата на регистрация</th>
                    <th>МОЛ</th>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </div>
    </div>

</div>
{% endblock %}

{% block footer_scripts %}
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://underscorejs.org/underscore.js"></script>
  <script src="{{ STATIC_URL }}js/jquery.validate.js"> </script>
  <script src="{{ STATIC_URL }}js/appConfig.js"></script>
  <script src="{{ STATIC_URL }}js/typeahead.js"></script>
  <script src="{{ STATIC_URL }}js/typeAheadFactory.js"></script>
  <script>
  // TODO: Refacturing! Code duplicating
  $(document).ready(function(){
    createNewTypeAhead = function() {},
    TypeAheader = window.Diaphanum.TypeAheader,
    typeAheadConfig = {
      template : $("#team-member-autocomplete-template").html(),
      name : "names" + _.uniqueId()
    },
    typeAheadSelectCallback = function(data){
        $("#mol-id-container").val(data.id);
        console.log(data.id);
    },
    TypeAheader.feed($("input.autocomplete"), typeAheadConfig , typeAheadSelectCallback);
  });</script>
{% endblock %}
